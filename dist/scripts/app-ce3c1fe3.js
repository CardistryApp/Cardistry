"use strict";angular.module("cardistry",["ui.router","firebase","cardistry.cards","cardistry.main"]).run(["$rootScope","$state",function(a,r){a.$on("$stateChangeError",function(a,t,e,l,i,s){"AUTH_REQUIRED"===s&&(alert("please log in!"),r.go("home"))})}]).config(["$stateProvider","$urlRouterProvider",function(a,r){a.state("home",{url:"/",templateUrl:"app/partials/home.html",controller:"loginPageCtrl as login"}).state("account",{controller:"MainCtrl as app",url:"/account",templateUrl:"app/partials/account-page.html"}).state("player",{controller:"PlayerCtrl as players",url:"/player",templateUrl:"app/partials/player.html",resolve:{Deck:"Deck"}}).state("czar",{url:"/player",templateUrl:"app/partials/czar.html"}).state("about",{url:"/about",templateUrl:"app/partials/about.html"}),r.otherwise("/")}]),angular.module("cardistry.main",["cardistry.cards","firebase"]).constant("CONFIG",{Firebase:{baseUrl:"https://cardistry.firebaseio.com/gameDB"}}).controller("MainCtrl",["Deck","$firebase","Auth","$rootScope","$filter",function(a,r,t,e,l){var i=this;t.onAuth(function(a){i.user=a}),this.dealIn=function(){this.user.hand=l("limitTo")(a.whiteCards,10),i.user.$save()}}]).controller("PlayerCtrl",["Deck","$filter","Auth",function(a,r,t){var e=this;t.onAuth(function(a){e.user=a}),console.log(e.user),this.qcards=r("limitTo")(a.blackCards,1),this.acards=e.user.hand,e.user.$loaded().then(function(){e.acards=e.user.hand,console.log(e.acards)}),this.dealIn=function(){this.user.hand=r("limitTo")(a.whiteCards,10),e.user.$save()},this.playCard=function(t,l,i,s){this.acards.splice(s,1),$("li#"+s).remove(),$("li#"+s).append("test"),console.log(this.acards),this.qcards.splice(s,1),this.qcards=r("limitTo")(a.blackCards,1),this.user.hand=r("limitTo")(a.whiteCards,10),e.user.$save()}}]).controller("loginPageCtrl",["$rootScope","Auth","$firebase","$filter","Deck",function(a,r){this.logIn=r.logIn,this.logOut=r.logOut}]).factory("FirebaseUrl",["CONFIG",function(a){return new Firebase(a.Firebase.baseUrl)}]).factory("Auth",["FirebaseUrl","$firebaseAuth","$firebase","$filter","Deck",function(a,r,t){function e(r){if(null===r)return null;var e=a.child("players").child(r.facebook.id);e.update({uid:r.uid,facebook:r.facebook,fullName:r.facebook.displayName,firstName:r.facebook.cachedUserProfile.first_name,avatarUrl:r.facebook.cachedUserProfile.picture.data.url,dailyScore:0,weeklyScore:0,totalScore:0});var e=t(a.child("players").child(r.facebook.id)).$asObject();return e}var l=r(a);return{onAuth:function(a){l.$onAuth(function(r){a(e(r))})},logIn:function(){return l.$authWithOAuthPopup("facebook")},logOut:function(){l.$unauth()}}}]),angular.module("cardistry.cards",[]).service("Deck",["$http",function(a){this.deck=[],this.whiteCards=[],this.blackCards=[];var r=this;a.get("./assets/data/cards.JSON").then(function(a){angular.forEach(a.data,function(a){"A"===a.cardType?r.whiteCards.push(a):"Q"===a.cardType&&1===a.numAnswers&&r.blackCards.push(a)}),r.deck=a.data,t(r.whiteCards),t(r.blackCards)});var t=function(a){for(var r,t,e=a.length;e;)t=Math.floor(Math.random()*e--),r=a[e],a[e]=a[t],a[t]=r;return a}}]),function(a){try{a=angular.module("cardistry")}catch(r){a=angular.module("cardistry",[])}a.run(["$templateCache",function(a){a.put("app/partials/about.html",'<div class="allabout"><div id="explaination"><h2>So... what is<br>Cards Against Singularity, anyway?</h2><br><h3>Well, start reading because we ain\'t doing it for ya!</h3><br><p>Who doesn\'t love Cards Against Humanity? We\'ll tell you who... the Introverts!<br><br></p><p>We just want to unite with other <span id="horrible">HORRIBLE</span> people but separately, in the safety of our own homes. Now we can, with Cards Against Singularity!</p><br></div><h3 class="rules">How To Play</h3><br><ol><li>Sign in via Facebook</li><br><li>Pick your Poison: Player or Czar.</li><br><li>As Player, you will view question cards and submit your best answer card from your hand... just waiting to be judged by others. No pressure though.</li><br><li>As Czar, you will view a collection of question/answer card pairs submitted by your fellow introverts and judge their humor. Funny? That player gets an awesome point. Not funny? Shoot them down and hope they cry</li></ol></div><ul><li class="back"><a ui-sref="home">Back</a></li></ul>')}])}(),function(a){try{a=angular.module("cardistry")}catch(r){a=angular.module("cardistry",[])}a.run(["$templateCache",function(a){a.put("app/partials/account-page.html",'<div class="account"><section id="accountInfo"><img id="profilePic" src="{{app.user.avatarUrl}}"> <span id="greeting">Yo, {{app.user.firstName}}</span> <button ng-show="app.user.hand.length !== 10" id="deal" ng-click="app.dealIn()">Deal Me In!</button><ul id="scoreboard"><li>Daily Score: {{app.user.dailyScore}}</li><li>Weekly Score: {{app.user.weeklyScore}}</li><li>Total Score: {{app.user.totalScore}}</li></ul></section><ul id="gameChoices"><li class="bottom-left" id="cardCzar"><a ui-sref="czar">CZAR</a></li><li class="bottom-right" id="playerSelect"><a ui-sref="player">PLAYER</a></li></ul></div>')}])}(),function(a){try{a=angular.module("cardistry")}catch(r){a=angular.module("cardistry",[])}a.run(["$templateCache",function(a){a.put("app/partials/home.html",'<div class="auth"><ul><li class="top"><p>Cards Against Singularity</p></li><li class="about"><a ui-sref="about">About</a></li><li class="bottom"><a ui-sref="account">SIGN IN</a></li></ul></div>')}])}(),function(a){try{a=angular.module("cardistry")}catch(r){a=angular.module("cardistry",[])}a.run(["$templateCache",function(a){a.put("app/partials/lobby.html",'<div id="lobby" class="containr"><h1>Game Lobby</h1><ul class="col-md-4"><li><h1><a ui-sref="lobby.players">Players</a></h1></li><li><h1><a ui-sref="lobby.rules">Game Rules</a></h1></li><li><h1><a ui-sref="lobby.invite">Invite Friends</a></h1></li><li><h1><a ng-click="app.syncUp()">Start!</a></h1></li></ul><div class="col-md-8" ui-view=""></div></div>')}])}(),function(a){try{a=angular.module("cardistry")}catch(r){a=angular.module("cardistry",[])}a.run(["$templateCache",function(a){a.put("app/partials/player.html",'<div id="player"><ul id="questions"><li><section id="question" class="top" ng-repeat="card in players.qcards"><h3>{{card.text}}</h3></section></li></ul><h3 id="answer"><section id="answerCards" class="bottom"><div id="ansWrap"><li ng-repeat="card in players.acards" id="{{$index}}">{{card.text}}<button type="submit" ng-click="players.playCard(player,card.id,card.text, $index)">play</button><span hidden="" id="confirm">Are You Sure?<button id="submit">Yes</button></span><button ng-show="players.acards.length < 10" ng-click="players.dealIn" id="cardBack">Gimme a card!</button></li></div></section></h3></div>')}])}(),function(a){try{a=angular.module("cardistry")}catch(r){a=angular.module("cardistry",[])}a.run(["$templateCache",function(a){a.put("components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></nav>')}])}();